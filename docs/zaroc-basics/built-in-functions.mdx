---
sidebar_position: 4
---

# Built-in Functions

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

Zaroc has many useful Functions that can help us handle Dialogflow's Request in our backend and provide a good response.

## Zaroc Functions

### Intents

These Functions help us to handle Intents

#### Intent

> - receives the name of the intent and returns true or false, is used in IF statements to do an specific behavior for an intent in our code

<Tabs>
<TabItem value="php" label="PHP">

```php
if(intent('intentName')){
    //Do some code
}
```

</TabItem>
<TabItem value="nodejs" label="Node.js">

```nodejs
ALPHA
```

</TabItem>
</Tabs>

#### Action

> - Receives the name of an action and returns true or false, is used in IF statements to filter intents.
> - You can use action as other filter to work with specific rules for some intents.

<Tabs>
<TabItem value="php" label="PHP">

```php
if(action('actionName')){
    //Do some code
}
```

</TabItem>
<TabItem value="nodejs" label="Node.js">

```nodejs
ALPHA
```

</TabItem>
</Tabs>

.

### Parameters

These functions are used to handle Parameters

#### getIntentParameter

> - Returns the value of the specified Parameter in the living Intent

<Tabs>
<TabItem value="php" label="PHP">

```php
$parameterValue = getIntentParameter()['parameterName'];
```

</TabItem>
<TabItem value="nodejs" label="Node.js">

```nodejs
ALPHA
```

</TabItem>
</Tabs>

#### getContextParameter

> - Returns the value of the specified Parameter and Context
> - Receives a Number as the index of the specified Context when the variable is living

<Tabs>
<TabItem value="php" label="PHP">

```php
$parameterValue = getContextParameter(0)['parameterName'];
```

</TabItem>
<TabItem value="nodejs" label="Node.js">

```nodejs
ALPHA
```

</TabItem>
</Tabs>

.

### Triggers

These functions help us to Trigger Special Behaviors on our Chatbot from the Backend

#### triggerEvent

> - Triggers the Intent that has the event typed as argument
> - Receives the Event name and Params as Array
> - Params are optional, these params helps to send data to the context from the current intent to the nextIntent that is being trigger by this Function

<Tabs>
<TabItem value="php" label="PHP">

```php
$eventName = array("event1");
$params = array();

triggerEvent($eventName,$params);
```

</TabItem>
<TabItem value="nodejs" label="Node.js">

```nodejs
ALPHA
```

</TabItem>
</Tabs>

#### triggerError

> - Displays an Error, works for all the integrations.
> - Receives as Array, the name of the intent and the message of the error to trigger.

<Tabs>
<TabItem value="php" label="PHP">

```php
$context = false;
$contextBody = array();
$intentName = array("intent1");
$errorMessage = array("Query wasnt executed ðŸ’¥");
$params = array();

triggerError($context,$contextBody,$intentName,$errorMessage,$params);
```

</TabItem>
<TabItem value="nodejs" label="Node.js">

```nodejs
ALPHA
```

</TabItem>
</Tabs>

#### triggerPrompt

> - Triggers a Prompt when needed, has the same format as the default required parameters that dialogflow has.
> - Its used in Addition with SlotFilling (Check Documentation for SlotFilling).
> - context and contextBody are optional. (Remember to check Doc for Context if you wanna use it).

<Tabs>
<TabItem value="php" label="PHP">

```php
$context = false;
$contextbody = array();
$prompt = array("Whats your favourite food");

triggerPropmt($context,$contextBody,$prompt);
```

</TabItem>
<TabItem value="nodejs" label="Node.js">

```nodejs
context = false;
contextbody = false;
prompt = ["Whats your favourite food"];

result = triggerPropmt(context, contextBody, prompt);

return result;
```

</TabItem>
</Tabs>

.

### Context

Context help us to save information, with these backend functions we can create and update variables on an specific context.

> - Be noticed that we cant delete variables neither contexts. Just create and update.
> - To have a whole picture of how Context works, check Context on Zaroc's Advanced.

#### setContextParameter

> - This Function allow us to add a Parameter to the Selected Context.

<Tabs>
<TabItem value="php" label="PHP">

```php
$contextIndex = array(0);
$variableName = array("fruit");
$variableValue = array("coco");

$contextBody = setContextParameter($contextIndex,$variableName,$variableValue);
```

</TabItem>
<TabItem value="nodejs" label="Node.js">

```nodejs
ALPHA
```

</TabItem>
</Tabs>

#### updateContextParameter

> - This functions allow us to update the value of a parameter inside of the selected context.

<Tabs>
<TabItem value="php" label="PHP">

```php
$contextIndex = array(0);
$variableName = array("fruit");
$variableValue = array("Banana");

$contextBody = updateContextParameter($contextIndex,$variableName,$variableValue);
```

</TabItem>
<TabItem value="nodejs" label="Node.js">

```nodejs
ALPHA
```

</TabItem>
</Tabs>

#### setContextParameters

> - Creates multiple values on the selected Context.

<Tabs>
<TabItem value="php" label="PHP">

```php
$contextIndex = array(0);

$parameters = array(
    'color' => 'white',
    'animal' => 'bird',
    'coffee' => 'expresso'
);

$contextBody = setContextParameters($contextIndex, $parameters);
```

</TabItem>
<TabItem value="nodejs" label="Node.js">

```nodejs
ALPHA
```

</TabItem>
</Tabs>

#### updateContextParameters

> - Updates multiples values on the selected context.

<Tabs>
<TabItem value="php" label="PHP">

```php
$contextIndex = array(0);

$parameters = array(
    'color' => 'black',
    'fruit' => 'apple',
    'coffee' => 'capuccinno',
    'animal' => 'gorilla'
);

$contextBody = updateContextParameters($contextIndex, $parameters);
```

</TabItem>
<TabItem value="nodejs" label="Node.js">

```nodejs
ALPHA
```

</TabItem>
</Tabs>

.

### Troubleshoot

In order to Troubleshoot we can use some functions.

#### getInput

> - Returns the Entire input Request that Dialogflow has sent
> - This input helps you to look at the body and troubleshoot.

<Tabs>
<TabItem value="php" label="PHP">

```php
$input = getInput();
```

</TabItem>
<TabItem value="nodejs" label="Node.js">

```nodejs
ALPHA
```

</TabItem>
</Tabs>

#### createInput

> - This function allow us to create a file.txt on ourServer with all the Request.
> - Receives an array with the name of the file that you would like to create.

<Tabs>
<TabItem value="php" label="PHP">

```php
$fileName = array("request");
createInput($fileName);
```

</TabItem>
<TabItem value="nodejs" label="Node.js">

```nodejs
ALPHA
```

</TabItem>
</Tabs>

#### getTimeOut

> - Returns the time in ms that took all code execution to be done.
> - getTimeOut can't take ms that cost the request in being proccesed by Dialogflow.

<Tabs>
<TabItem value="php" label="PHP">

```php
$time = getTimeOut();
```

</TabItem>
<TabItem value="nodejs" label="Node.js">

```nodejs
ALPHA
```

</TabItem>
</Tabs>

.

### Miscelaneous

These functions are not commonly used, but sometimes are helpfull.

#### getUserInput

> - Returns the Input from the user that Triggered the intent

<Tabs>
<TabItem value="php" label="PHP">

```php
$userInput = getUserInput();
```

</TabItem>
<TabItem value="nodejs" label="Node.js">

```nodejs
ALPHA
```

</TabItem>
</Tabs>

#### getSessionID

> - Returns the sessionId of the current chat/session
> - Id format changes depending of the platform/integration

<Tabs>
<TabItem value="php" label="PHP">

```php
$sessionId = getSessionId();
```

</TabItem>
<TabItem value="nodejs" label="Node.js">

```nodejs
ALPHA
```

</TabItem>
</Tabs>

#### getProjectName

> - Retrieves the name of the project

<Tabs>
<TabItem value="php" label="PHP">

```php
$projectName = getProjectName();
```

</TabItem>
<TabItem value="nodejs" label="Node.js">

```nodejs
ALPHA
```

</TabItem>
</Tabs>

#### getWhatsAppPhoneNumber

> - Retrieves a WhatsApp PhoneNumber if you are in Session VIA whatsApp
> - This data is provided for mostly wWhatsApp Providers

<Tabs>
<TabItem value="php" label="PHP">

```php
$phoneNumber = getWhatsAppPhoneNumber();
```

</TabItem>
<TabItem value="nodejs" label="Node.js">

```nodejs
ALPHA
```

</TabItem>
</Tabs>

#### getTelegramChatId

> - Returns the ChatId of a Telegram Chat
> - Only obtainable if you are chatting via Telegram

<Tabs>
<TabItem value="php" label="PHP">

```php
$chatID = getTelegramChatId();
```

</TabItem>
<TabItem value="nodejs" label="Node.js">

```nodejs
ALPHA
```

</TabItem>
</Tabs>
